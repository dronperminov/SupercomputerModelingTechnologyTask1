# SupercomputerModelingTechnologyTask1
Реализация первого практического задания в рамках курса "Суперкомпьютерное моделирование и технологии"

Реализована параллельная MPI-программа, принимающая от 0 до 9 аргументов (доступно при запуске с флагом --help):

* `-e` – необходимая точность вычисления интеграла (по умолчанию 1e-3);
* `-n` – количество точек, отдаваемых каждому процессу (по умолчанию 1000);
* `-d` – флаг отладки для вывода дополнительной информации (по умолчанию не используется);
* `-xmin` – нижняя граница изменения переменной x в параллелипипеде (по умолчанию 0);
* `-xmax` – верхняя граница изменения переменной x в параллелипипеде (по умолчанию 1);
* `-ymin` – нижняя граница изменения переменной y в параллелипипеде (по умолчанию 0);
* `-ymax` – верхняя граница изменения переменной y в параллелипипеде (по умолчанию 1);
* `-zmin` – нижняя граница изменения переменной z в параллелипипеде (по умолчанию 0);
* `-zmax` – верхняя граница изменения переменной z в параллелипипеде (по умолчанию 1);

При запуске программы все процессы считывают переданные аргументы, проверяя их на корректность, после чего в случае успешной проверки запускают основной цикл вычислений.
В качестве параллельной реализации используется парадигма «мастер–рабочие»: один из процессов («мастер») генерирует случайные точки и передаёт каждому из остальных процессов («рабочих») отдельный, предназначенный для него, набор сгенерированных случайных точек. Все процессы – рабочие вычисляют свою часть суммы. Затем вычисляется общая сумма с помощью операции редукции и итоговый интеграл.

Полученное значение интеграла сравнивается с заранее заданным эталоном и в случае достижения требуемой точности процессам рабочим передаётся флаг, сигнализирующий об окончании вычислений и завершении работы. В противном случае генерируется новая порция точек и процесс вычисления повторяется.

## Сборка программы
Сборка осуществляется путём выполнения команды `make` из директории с программой. Для отправки на учебные кластеры используются цели `submit-polus` и `submit-bluegene`:

### Пример сборки:
```bash
> make
> make submit-polus
> make submit-bluegene
```

## Пример работы программы
```
Processors: 16
Eps: 1e-06
Points per process: 1000
Dimensions: [0, 1] x [0, 1] x [0, 1]
Volume: 1
Loops: 129
Total number of points: 2064000
Target integrate value: 0.00274725
Calculated integrate value: 0.0027475
Error: 2.48997e-07
Max time: 0.0163059
Min time: 0.0162583
Average time: 0.0162845
```

## Таблица с результатами расчётов для системы Bluegene (N = 1000)

| Точность (ε) | Число MPI процессов | Время работы программы (с) | Ускорение |    Ошибка   |
|          :-: |                 :-: |                        :-: |       :-: |         :-: |
|         1e-4 |                   2 |                  0.0339346 |         1 | 5.69829e-05 |
|         1e-4 |                   4 |                  0.0304035 |     1.116 | 5.00716e-05 |
|         1e-4 |                  16 |                  0.0528023 |     0.642 | 6.17547e-05 |
|         1e-4 |                  64 |                  0.0835488 |     0.406 | 5.75076e-05 |
|         2e-5 |                   2 |                    0.13842 |         1 | 1.22010e-05 |
|         2e-5 |                   4 |                   0.524959 |     0.263 | 1.44155e-05 |
|         2e-5 |                  16 |                   0.168718 |     0.820 | 1.04416e-05 |
|         2e-5 |                  64 |                   0.330364 |     0.419 | 1.27367e-05 |
|         8e-6 |                   2 |                   0.131129 |         1 | 4.75472e-06 |
|         8e-6 |                   4 |                    1.85116 |     0.070 | 5.02529e-06 |
|         8e-6 |                  16 |                   0.375811 |     0.348 | 4.77424e-06 |
|         8e-6 |                  64 |                    2.16166 |     0.060 | 4.32039e-06 |


## Таблица с результатами расчётов для системы Polus (N = 1000)

| Точность (ε) | Число MPI процессов | Время работы программы (с) | Ускорение |    Ошибка   |
|          :-: |                 :-: |                        :-: |       :-: |         :-: |
|         3e-5 |                   2 |                   0.015699 |         1 | 1.68166e-05 |
|         3e-5 |                   4 |                   0.017012 |     0.998 | 1.62863e-05 |
|         3e-5 |                  16 |                   0.018860 |     0.901 | 1.75938e-05 |
|         3e-5 |                  64 |                   0.028821 |     0.589 | 1.53217e-05 |
|         5e-6 |                   2 |                   0.019746 |         1 | 1.89184e-06 |
|         5e-6 |                   4 |                   0.399240 |     0.049 | 3.17904e-06 |
|         5e-6 |                  16 |                   0.239083 |     0.082 | 3.27953e-06 |
|         5e-6 |                  64 |                   0.275809 |     0.072 | 2.66778e-06 |
|       1.5e-6 |                   2 |                   0.020431 |         1 | 1.05166e-06 |
|       1.5e-6 |                   4 |                   1.543330 |     0.013 | 7.35179e-07 |
|       1.5e-6 |                  16 |                   1.255690 |     0.016 | 8.43032e-07 |
|       1.5e-6 |                  64 |                   2.957080 |     0.007 | 8.21990e-07 |